/**************************************************************************
 * File Name: led.c
 * Description : LED Control Code
 * Writer: supeurpon@126.com
 * Revision: 
****************************************************************************************/
    |--------------------|
    |  TEST-PB5          |
    |--------------------|

#include "led.h"
static void Delay(u32 nCount);

/**************************************************************************
 * ��������LED_conf
 * ����  ��STM8����������LED���������ų�ʼ��
 * ����  ����
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ⲿ���� 
 *************************************************************************/
void LED_conf(void)
{
  PD_DDR|=0x0f;   /* �������ݷ���Ĵ��� 1Ϊ�����0Ϊ����--�鿴STM8�Ĵ���.pdf P87 */
  PD_CR1|=0x0f;   /* �����������--�鿴STM8�Ĵ���.pdf P88 */
  PD_CR2|=0x0f;   /* �������Ƶ�� 1Ϊ10M��0Ϊ2M--�鿴STM8�Ĵ���.pdf P89 */
  
}

/**************************************************************************
 * ��������Set_Led_On
 * ����  ��LED��ȫ��
 * ����  ����
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ⲿ���� 
 *************************************************************************/
void Set_Led_On(void)
{
  PD_ODR&=0xf0;   /* �����ݼĴ���д��ֵ д0����д1��--�鿴STM8�Ĵ���.pdf P85 */
}

/**************************************************************************
 * ��������Set_Led_Off
 * ����  ��LED��ȫ��
 * ����  ����
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ⲿ���� 
 *************************************************************************/
void Set_Led_Off(void)
{
  PD_ODR|=0x0f;   /* �����ݼĴ���д��ֵ д0����д1��--�鿴STM8�Ĵ���.pdf P85 */
}

/**************************************************************************
 * ��������LED_Display
 * ����  ��LED��ˮ��
 * ����  ����
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ⲿ���� 
 *************************************************************************/
void LED_Display(void)
{
  u8 PortVal;
  for(PortVal=0;PortVal<4;PortVal++)
  {
      PD_ODR =(u8)(~(1<<PortVal));    /* ��λ��ȡ��  */   
      Delay(0x1fff);    /* ��ʱһС��ʱ�䣬���򿴲���LED������Ч�� */
  }
}

/**************************************************************************
 * ��������LED_Display_Bit
 * ����  ����51��̷��ʵ��LED0������
 * ����  ����
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ⲿ���� 
 *************************************************************************/
void LED_Display_Bit()
{
  PD0_out = 0;    /* PD0�������0 */
  Delay(0x1fff);  
  PD0_out = 1;    /* PD0�������1 */
  Delay(0x1fff);  
}


/**************************************************************************
 * ��������Delay
 * ����  ����ʱ����
 * ����  ��nCount--Ҫ��ʱ�ļ���ֵ
 *
 * ���  ����
 * ����  ���� 
 * ����  ���ڲ����� 
 *************************************************************************/
static void Delay(u32 nCount)
{
  /* Decrement nCount value */
  while (nCount != 0)
  {
    nCount--;
  }

}
/******************* (C) COPYRIGHT ���iCreateǶ��ʽ���������� *****END OF FILE****/